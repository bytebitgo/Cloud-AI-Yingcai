# 🚀 Cloud-AI-Yingcai VSCode 扩展

这是一个强大的VSCode扩展，允许你在编辑器中直接与AI进行交互。通过配置Cloud-AI-Yingcai的endpoint和API key，你可以方便地使用AI聊天功能，提升开发效率。

## ✨ 功能特色

- 🔌 **自定义API配置**：支持配置自定义API endpoint和key
- 📝 **多配置管理**：支持保存多个配置，方便切换不同的API账号和服务
- 🤖 **多模型支持**：可添加、删除和选择多个AI模型，满足不同场景需求
- 💬 **简洁聊天界面**：提供直观的聊天体验，支持实时对话
- 🎨 **主题适配**：使用VSCode主题样式，提供一致的视觉体验
- 💾 **自动保存配置**：配置信息自动保存到VSCode设置中
- 🔄 **状态记忆功能**：切换界面后返回时，自动恢复之前选择的配置和模型
- ⌨️ **快捷键支持**：支持使用快捷键发送消息
- 🔥 **格式支持**：支持代码块和Markdown格式显示
- 📋 **代码复制**：支持代码块一键复制功能
- ⚡ **流式响应**：实时显示AI回复，提供打字机效果
- ❗ **智能错误处理**：提供清晰的错误提示和处理机制
- 🔄 **实时配置更新**：配置变更后自动刷新界面
- 🗑️ **模型管理**：可以直接添加和删除模型，简化配置流程

## 🚀 最新功能

- **配置和模型选择记忆功能**：切换到其他界面再切回来时会保持上次的选择
- **模型删除功能**：可以在设置面板中直接删除不需要的模型
- **优化的模型选择逻辑**：在切换配置时尝试保持之前选择的模型（如果新配置中存在）
- **改进的错误处理**：更清晰的错误提示和处理机制
- **优化的UI布局**：更直观的模型添加和管理界面
- **配置快速切换**：在聊天界面可直接切换配置和模型

## 📖 使用方法

### 基本设置

1. 点击VSCode侧边栏中的AI Chat图标(💭)打开聊天窗口
2. 切换到设置面板进行配置：
   - **配置名称**：为当前配置设置一个名称
   - **API Endpoint**：Cloud-AI-Yingcai的API地址
   - **API Key**：你的API密钥
   - **可用模型**：添加或删除AI模型，选择当前要使用的模型
3. 配置完成后点击保存，即可在聊天窗口与AI对话

### 多配置管理

1. 在设置面板中，可以通过下拉列表查看和管理已保存的配置
2. 选择"-- 新建配置 --"创建新配置
3. 选择已有配置可以编辑或删除该配置
4. 在聊天界面可以直接通过下拉列表切换不同配置

### 模型管理

1. 在设置面板中，可以查看当前配置的所有模型
2. 通过单选按钮选择默认使用的模型
3. 点击"删除"按钮可以移除不需要的模型
4. 在输入框中输入新模型名称，点击"添加模型"按钮添加新模型
5. 在聊天界面可以直接通过下拉列表切换不同模型

### 聊天功能

1. 在聊天界面的输入框中输入消息
2. 按Enter键或点击"发送"按钮发送消息
3. AI会实时流式返回回复，支持代码块和Markdown格式
4. 代码块右上角有复制按钮，点击可复制代码
5. 可以随时切换配置和模型，系统会记住你的选择

## ⌨️ 命令和快捷键

扩展提供以下命令:

- `打开AI聊天`: 打开聊天窗口
- `打开AI设置`: 打开设置面板

快捷键:
- 在输入框中按`Enter`发送消息
- 使用命令面板(`Ctrl+Shift+P` / `Cmd+Shift+P`)可以快速访问所有命令

## ⚙️ 设置项

在VSCode设置中可以找到以下配置项：

- `cloud-ai-yingcai.configurations`: 保存的所有API配置
- `cloud-ai-yingcai.currentConfig`: 当前使用的配置名称

每个配置包含以下内容：
- 配置名称
- API endpoint
- API key
- 可用模型列表及选中状态

## 🔒 安全说明

- API密钥保存在VSCode的安全存储中
- 所有请求都通过HTTPS加密传输
- 不会收集或存储聊天记录
- 可以为不同环境创建独立配置，避免混用API密钥

## 🛠️ 常见问题解答

### Q: 如何添加新的模型？
A: 在设置面板中，输入模型名称后点击"添加模型"按钮即可添加新模型。

### Q: 配置切换后模型列表会重置吗？
A: 不会。扩展会尝试保持你之前选择的模型（如果新配置中存在该模型）。

### Q: 如何删除不需要的配置？
A: 在设置面板的配置下拉列表中，选择要删除的配置，然后点击"删除"按钮。

### Q: 为什么我的API请求失败？
A: 请检查以下几点：
   - API Endpoint是否正确
   - API Key是否有效
   - 网络连接是否正常
   - 所选模型是否在你的Cloud-AI-Yingcai中可用

## 👨‍💻 开发

1. 克隆仓库
2. 运行`npm install`安装依赖
3. 打开VSCode并按`F5`启动调试
4. 在新窗口中测试扩展

## 📦 发布

```bash
vsce package
vsce publish
```

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📄 许可证

MIT
